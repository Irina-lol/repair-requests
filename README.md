# üõ† –°–µ—Ä–≤–∏—Å –∑–∞—è–≤–æ–∫ –≤ —Ä–µ–º–æ–Ω—Ç–Ω—É—é —Å–ª—É–∂–±—É

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–∏—ë–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –≤ —Ä–µ–º–æ–Ω—Ç–Ω—É—é —Å–ª—É–∂–±—É. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–µ —Ä–æ–ª–∏: –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∏ –º–∞—Å—Ç–µ—Ä.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- npm –∏–ª–∏ yarn

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Irina-lol/repair-requests.git
cd repair-requests

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
npx prisma migrate dev --name init
npm run seed

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000

–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
–†–æ–ª—å	–ò–º—è	Email	–ü–∞—Ä–æ–ª—å
–î–∏—Å–ø–µ—Ç—á–µ—Ä	–î–∏—Å–ø–µ—Ç—á–µ—Ä –ê–Ω–Ω–∞	dispatcher@example.com	123456
–ú–∞—Å—Ç–µ—Ä	–ú–∞—Å—Ç–µ—Ä –ü–µ—Ç—Ä	petr@example.com	123456
–ú–∞—Å—Ç–µ—Ä	–ú–∞—Å—Ç–µ—Ä –ò–≤–∞–Ω	ivan@example.com	123456
üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
–î–ª—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫

‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (new, assigned, in_progress, done, canceled)

‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É

‚úÖ –û—Ç–º–µ–Ω–∞ –∑–∞—è–≤–∫–∏

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫

–î–ª—è –º–∞—Å—Ç–µ—Ä–∞
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫

‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ–∫—Ü–∏—è–º:

"–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –≤–∞—Å" (–æ–∂–∏–¥–∞—é—Ç –≤–∑—è—Ç–∏—è)

"–í —Ä–∞–±–æ—Ç–µ" (—Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏)

"–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ" (–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ)

‚úÖ –í–∑—è—Ç—å –∑–∞—è–≤–∫—É –≤ —Ä–∞–±–æ—Ç—É (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –≥–æ–Ω–∫–∏!)

‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞—è–≤–∫—É

üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–∫–∏ (race condition)
–í –¥–µ–π—Å—Ç–≤–∏–∏ "–í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Prisma.

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∑–∞—â–∏—Ç—ã
–í–∞—Ä–∏–∞–Ω—Ç 1: PowerShell —Å–∫—Ä–∏–ø—Ç
powershell
.\race_test.ps1
–í–∞—Ä–∏–∞–Ω—Ç 2: Node.js —Å–∫—Ä–∏–ø—Ç
bash
node test-race.js
–í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é (–¥–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
–¢–µ—Ä–º–∏–Ω–∞–ª 1:

bash
curl -X PATCH http://localhost:3000/api/requests/2 \
  -H "Content-Type: application/json" \
  -d '{"action":"take","masterId":2}'
–¢–µ—Ä–º–∏–Ω–∞–ª 2 (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ):

bash
curl -X PATCH http://localhost:3000/api/requests/2 \
  -H "Content-Type: application/json" \
  -d '{"action":"take","masterId":2}'
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—ë—Ç 200, –≤—Ç–æ—Ä–æ–π - 409 Conflict.

üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
bash
npm test
üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
repair-requests/
‚îú‚îÄ‚îÄ app/                    # Next.js —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ API
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ dispatcher/        # –ü–∞–Ω–µ–ª—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ master/            # –ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ create-request/    # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
‚îú‚îÄ‚îÄ components/            # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ RequestCard.tsx    # –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞—è–≤–∫–∏
‚îú‚îÄ‚îÄ lib/                   # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts           # –•—É–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ prisma.ts         # Prisma –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ prisma/                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma     # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts           # –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ __tests__/            # –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
Next.js 16 - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

Prisma - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

SQLite - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

TypeScript - —Ç–∏–ø–∏–∑–∞—Ü–∏—è

Tailwind CSS - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

date-fns - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏

Jest - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ