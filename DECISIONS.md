# DECISIONS.md

## 1. Выбор стэка технологий
**Решение:** Next.js (App Router) + Prisma + SQLite + Tailwind CSS.
**Почему:** Next.js позволяет объединить фронтенд и бэкенд в одном проекте, упрощая деплой через Docker. Prisma дает удобную типизацию и миграции. SQLite не требует отдельного сервера, что идеально для тестового задания.

## 2. Структура базы данных
**Решение:** Две модели: User и Request. Связь "один ко многим", между User (мастер) и Request. 
**Почему:** Упрощенная модель соответствует ТЗ. Роль пользователя определяет доступный функционал (диспетчер и мастер). 

## 3. Аутентификация
**Решение:** Упрощенная (без сессий и JWT). В ТЗ требуется только выбор пользователя на странице. В будущих эндпоинтах будем принимать userTd как параметр.
**Почему:** Соответствует требованиям ТЗ. Не усложняя проект.

## 4. Обработка "гонки" (Race Condition)
**Решение:** Использование транзакций Prisma с проверкой текущего статуса перед обновлением.
**Почему:** Транзакции гарантируют атомарность операции: если 2 запроса попытаются одновременно взять заявку, только 1 сможет изменить статус с 'assigned' на 'in_progress', второй получит ошибку.