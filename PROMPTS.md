# PROMPTS.md
# Файл с историей запросов к AI

## Prompt 1 (24.02.2026, 10:04 по МСК) - Инициализация проекта
Инициализация Next.js проекта с TypeScript, настройка Prisma и SQLite.

## Prompt 2 (24.02.2026, 12:57 по МСК) - Создание API эндпоинтов
Созданы API эндпоинты:
- GET /api/users - список пользователей для выбора роли
- GET /api/requests - список заявок с фильтрацией
- POST /api/requests - создание новой заявки
- PATCH /api/requests/[id] - обновление заявки (назначить мастера, отменить, взять в работу, завершить)

Реализована защита от гонки через транзакцию Prisma для действия "Взять в работу".

## Prompt 4 (26.02.2026, 8:06 по МСК) - Исправление ошибок и отладка
- Исправлена проблема с бесконечными ререндерами через useCallback
- Исправлена ошибка Next.js 16+ с обработкой params (Promise) в API routes
- Починены все действия: назначение мастера, отмена, взятие в работу, завершение
- Добавлено подробное логирование для отладки
- Проверена работа всех функций:
  ✅ Фильтрация заявок по статусу
  ✅ Создание новых заявок
  ✅ Назначение мастера (new → assigned)
  ✅ Отмена заявок (→ canceled)
  ✅ Взятие в работу (assigned → in_progress) с защитой от гонки
  ✅ Завершение работы (in_progress → done)